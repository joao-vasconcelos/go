'use client';

import { useState, useEffect } from 'react';
import { styled } from '@stitches/react';
import { SimpleGrid, Textarea, Button, Alert } from '@mantine/core';
import parseShapesCsv from '../../services/parseShapesCsv';
import { TbInfoCircleFilled } from 'react-icons/tb';

//

const defaultText = `shape_id,shape_pt_lat,shape_pt_lon,shape_pt_sequence,shape_dist_traveled
p0_1,38.7607611677456,-9.23716468433084,1,0
p0_1,38.76075,-9.23717,2,0.0013
p0_1,38.76073,-9.23713,3,0.0054
p0_1,38.76057,-9.23684,4,0.0362
p0_1,38.760450000000006,-9.23662,5,0.0595
p0_1,38.760400000000004,-9.23652,6,0.0698
p0_1,38.76012,-9.23601,7,0.1239
p0_1,38.75988,-9.235570000000001,8,0.1705
p0_1,38.759840000000004,-9.235510000000001,9,0.1773
p0_1,38.759570000000004,-9.23502,10,0.2293
p0_1,38.75947,-9.23483,11,0.2492
p0_1,38.75883,-9.2337,12,0.3703
p0_1,38.75878,-9.23361,13,0.3799
p0_1,38.75912,-9.233300000000002,14,0.4263
p0_1,38.75927,-9.233160000000002,15,0.4469
p0_1,38.75936,-9.233130000000001,16,0.4572
p0_1,38.75943,-9.23311,17,0.4652
p0_1,38.759690000000006,-9.23356,18,0.5138
p0_1,38.759730000000005,-9.233600000000001,19,0.5194
p0_1,38.759750000000004,-9.23361,20,0.5218
p0_1,38.75979,-9.23362,21,0.5263
p0_1,38.76012,-9.23367,22,0.5632
p0_1,38.760380000000005,-9.23371,23,0.5923
p0_1,38.76039,-9.23371,24,0.5934
p0_1,38.760540000000006,-9.233730000000001,25,0.6102
p0_1,38.760580000000004,-9.23372,26,0.6147
p0_1,38.760870000000004,-9.23344,27,0.6551
p0_1,38.761070000000004,-9.23325,28,0.6828
p0_1,38.761070000000004,-9.23324,29,0.6837
p0_1,38.76106,-9.23323,30,0.6851
p0_1,38.76106,-9.233220000000001,31,0.686
p0_1,38.76106,-9.233210000000001,32,0.6869
p0_1,38.761050000000004,-9.233210000000001,33,0.688
p0_1,38.761050000000004,-9.2332,34,0.6889
p0_1,38.761050000000004,-9.23319,35,0.6898
p0_1,38.761050000000004,-9.23318,36,0.6907
p0_1,38.761050000000004,-9.233170000000001,37,0.6916
p0_1,38.761050000000004,-9.233160000000002,38,0.6925
p0_1,38.761050000000004,-9.23315,39,0.6934
p0_1,38.761050000000004,-9.23314,40,0.6943
p0_1,38.761050000000004,-9.233130000000001,41,0.6952
p0_1,38.761050000000004,-9.233120000000001,42,0.6961
p0_1,38.76106,-9.23311,43,0.6975
p0_1,38.76106,-9.2331,44,0.6984
p0_1,38.761070000000004,-9.23309,45,0.6998
p0_1,38.761070000000004,-9.233080000000001,46,0.7007
p0_1,38.76108,-9.233070000000001,47,0.7021
p0_1,38.76108,-9.23306,48,0.703
p0_1,38.76109,-9.23306,49,0.7041
p0_1,38.761100000000006,-9.23305,50,0.7055
p0_1,38.76111,-9.23304,51,0.7069
p0_1,38.761120000000005,-9.23304,52,0.708
p0_1,38.76113,-9.233030000000001,53,0.7094
p0_1,38.761140000000005,-9.233030000000001,54,0.7105
p0_1,38.76115,-9.233030000000001,55,0.7116
p0_1,38.761160000000004,-9.233030000000001,56,0.7127
p0_1,38.76117,-9.233030000000001,57,0.7138
p0_1,38.76118,-9.233030000000001,58,0.7149
p0_1,38.76118,-9.23304,59,0.7158
p0_1,38.761190000000006,-9.23304,60,0.7169
p0_1,38.7612,-9.23304,61,0.718
p0_1,38.7612,-9.23305,62,0.7189
p0_1,38.761210000000005,-9.23305,63,0.72
p0_1,38.761210000000005,-9.23306,64,0.7209
p0_1,38.76122,-9.23306,65,0.722
p0_1,38.76122,-9.233070000000001,66,0.7229
p0_1,38.761230000000005,-9.233070000000001,67,0.724
p0_1,38.761230000000005,-9.233080000000001,68,0.7249
p0_1,38.76124,-9.233080000000001,69,0.726
p0_1,38.76194,-9.232380000000001,70,0.8247
p0_1,38.762150000000005,-9.232180000000001,71,0.8538
p0_1,38.76238,-9.231950000000001,72,0.8862
p0_1,38.76241,-9.23193,73,0.89
p0_1,38.76243,-9.231910000000001,74,0.8928
p0_1,38.762460000000004,-9.23189,75,0.8966
p0_1,38.76249,-9.23187,76,0.9004
p0_1,38.76252,-9.231860000000001,77,0.9038
p0_1,38.762550000000005,-9.231850000000001,78,0.9072
p0_1,38.76258,-9.23184,79,0.9106
p0_1,38.76267,-9.231800000000002,80,0.9212
p0_1,38.762800000000006,-9.23174,81,0.9366
p0_1,38.76286,-9.231720000000001,82,0.9435
p0_1,38.76292,-9.2317,83,0.9504
p0_1,38.76294,-9.23169,84,0.9528
p0_1,38.76296,-9.23169,85,0.955
p0_1,38.762980000000006,-9.23169,86,0.9572
p0_1,38.76301,-9.2317,87,0.9606
p0_1,38.76303,-9.231710000000001,88,0.963
p0_1,38.76314,-9.23174,89,0.9755
p0_1,38.763270000000006,-9.23178,90,0.9904
p0_1,38.763400000000004,-9.23182,91,1.0053
p0_1,38.76343000000001,-9.23183,92,1.0087
p0_1,38.763450000000006,-9.231770000000001,93,1.0144
p0_1,38.763450000000006,-9.231760000000001,94,1.0153
p0_1,38.76346,-9.23175,95,1.0167
p0_1,38.763470000000005,-9.23173,96,1.0188
p0_1,38.76348,-9.231720000000001,97,1.0202
p0_1,38.763490000000004,-9.2317,98,1.0223
p0_1,38.763510000000004,-9.23169,99,1.0247
p0_1,38.76353,-9.23168,100,1.0271
p0_1,38.76357,-9.231660000000002,101,1.0319
p0_1,38.76402,-9.231480000000001,102,1.0843
p0_1,38.764210000000006,-9.2314,103,1.1065
p0_1,38.76427,-9.23137,104,1.1137
p0_1,38.764340000000004,-9.231340000000001,105,1.1219
p0_1,38.76436,-9.231330000000002,106,1.1243
p0_1,38.76438,-9.23132,107,1.1267
p0_1,38.764390000000006,-9.23132,108,1.1278
p0_1,38.764410000000005,-9.23132,109,1.13
p0_1,38.764430000000004,-9.23132,110,1.1322
p0_1,38.764450000000004,-9.23132,111,1.1344
p0_1,38.76447,-9.231330000000002,112,1.1368
p0_1,38.76456,-9.23135,113,1.147
p0_1,38.7648,-9.231430000000001,114,1.1746
p0_1,38.765420000000006,-9.231630000000001,115,1.2457
p0_1,38.76549,-9.23165,116,1.2537
p0_1,38.765550000000005,-9.231670000000001,117,1.2606
p0_1,38.765640000000005,-9.2317,118,1.2709
p0_1,38.76587000000001,-9.231770000000001,119,1.2972
p0_1,38.76592,-9.23179,120,1.303
p0_1,38.76601,-9.23182,121,1.3133
p0_1,38.76603,-9.23182,122,1.3155
p0_1,38.76605,-9.23183,123,1.3179
p0_1,38.76606,-9.23183,124,1.319
p0_1,38.76608,-9.23183,125,1.3212
p0_1,38.7661,-9.23182,126,1.3236
p0_1,38.76612,-9.23182,127,1.3258
p0_1,38.76614,-9.231810000000001,128,1.3282
p0_1,38.766160000000006,-9.23178,129,1.3316
p0_1,38.766200000000005,-9.23173,130,1.3378
p0_1,38.76624,-9.23169,131,1.3434
p0_1,38.766270000000006,-9.23165,132,1.3482
p0_1,38.766310000000004,-9.23161,133,1.3538
p0_1,38.7663,-9.231580000000001,134,1.3566
p0_1,38.76628,-9.23154,135,1.3607
p0_1,38.766270000000006,-9.23149,136,1.3652
p0_1,38.766220000000004,-9.23136,137,1.3778
p0_1,38.766200000000005,-9.231290000000001,138,1.3843
p0_1,38.766180000000006,-9.231240000000001,139,1.3892
p0_1,38.76617,-9.23118,140,1.3945
p0_1,38.766220000000004,-9.231150000000001,141,1.4006
p0_1,38.76625000000001,-9.23113,142,1.4044
p0_1,38.766270000000006,-9.23112,143,1.4068
p0_1,38.766310000000004,-9.23109,144,1.412
p0_1,38.76635,-9.23107,145,1.4168
p0_1,38.766400000000004,-9.231010000000001,146,1.4244
p0_1,38.76644,-9.23098,147,1.4296
p0_1,38.766470000000005,-9.23095,148,1.4338
p0_1,38.766470000000005,-9.230780000000001,149,1.4485
p0_1,38.766470000000005,-9.230720000000002,150,1.4537
p0_1,38.76646,-9.230630000000001,151,1.4616
p0_1,38.76623,-9.22978,152,1.5396
p0_1,38.766130000000004,-9.22939,153,1.5752
p0_1,38.76612,-9.22934,154,1.5797
p0_1,38.76608,-9.229180000000001,155,1.5943
p0_1,38.76605,-9.22907,156,1.6044
p0_1,38.76603,-9.228990000000001,157,1.6117
p0_1,38.76601,-9.22893,158,1.6174
p0_1,38.76601,-9.228890000000002,159,1.6209
p0_1,38.76601,-9.228860000000001,160,1.6235
p0_1,38.76601,-9.22883,161,1.6261
p0_1,38.766020000000005,-9.228810000000001,162,1.6282
p0_1,38.76603,-9.228800000000001,163,1.6296
p0_1,38.766040000000004,-9.22878,164,1.6317
p0_1,38.76606,-9.228760000000001,165,1.6345
p0_1,38.766090000000005,-9.228750000000002,166,1.6379
p0_1,38.766110000000005,-9.22873,167,1.6407
p0_1,38.76615,-9.228720000000001,168,1.6452
p0_1,38.76624,-9.22868,169,1.6558
p0_1,38.766420000000004,-9.2286,170,1.677
p0_1,38.766600000000004,-9.228520000000001,171,1.6982
p0_1,38.76671,-9.22846,172,1.7115
p0_1,38.76682,-9.228390000000001,173,1.7252
p0_1,38.76688,-9.228340000000001,174,1.7332
p0_1,38.767,-9.228240000000001,175,1.7491
p0_1,38.76704,-9.228200000000001,176,1.7547
p0_1,38.767100000000006,-9.22812,177,1.7643
p0_1,38.76724,-9.227970000000001,178,1.7846
p0_1,38.76753,-9.22765,179,1.8271
p0_1,38.7676,-9.227580000000001,180,1.837
p0_1,38.767680000000006,-9.22748,181,1.8494
p0_1,38.767720000000004,-9.227400000000001,182,1.8576
p0_1,38.76776,-9.227310000000001,183,1.8666
p0_1,38.767790000000005,-9.22722,184,1.8751
p0_1,38.76782,-9.22715,185,1.882
p0_1,38.767830000000004,-9.227070000000001,186,1.889
p0_1,38.76785,-9.227,187,1.8955
p0_1,38.767860000000006,-9.22694,188,1.9008
p0_1,38.767860000000006,-9.22687,189,1.9069
p0_1,38.76787,-9.226830000000001,190,1.9105
p0_1,38.76787,-9.226780000000002,191,1.9148
p0_1,38.76787,-9.226750000000001,192,1.9174
p0_1,38.767830000000004,-9.226700000000001,193,1.9236
p0_1,38.76775000000001,-9.226550000000001,194,1.9394
p0_1,38.76774,-9.226550000000001,195,1.9405
p0_1,38.76773,-9.226550000000001,196,1.9416
p0_1,38.767720000000004,-9.226550000000001,197,1.9427
p0_1,38.767720000000004,-9.22654,198,1.9436
p0_1,38.76771,-9.22654,199,1.9447
p0_1,38.767700000000005,-9.22654,200,1.9458
p0_1,38.767700000000005,-9.22653,201,1.9467
p0_1,38.76769,-9.22653,202,1.9478
p0_1,38.76769,-9.22652,203,1.9487
p0_1,38.767680000000006,-9.22652,204,1.9498
p0_1,38.767680000000006,-9.226510000000001,205,1.9507
p0_1,38.76767,-9.226510000000001,206,1.9518
p0_1,38.76767,-9.226500000000001,207,1.9527
p0_1,38.76767,-9.22649,208,1.9536
p0_1,38.76766000000001,-9.22649,209,1.9547
p0_1,38.76766000000001,-9.22648,210,1.9556
p0_1,38.76766000000001,-9.22647,211,1.9565
p0_1,38.76766000000001,-9.226460000000001,212,1.9574
p0_1,38.76765,-9.226450000000002,213,1.9588
p0_1,38.76765,-9.22644,214,1.9597
p0_1,38.76765,-9.22643,215,1.9606
p0_1,38.76765,-9.226420000000001,216,1.9615
p0_1,38.76765,-9.226410000000001,217,1.9624
p0_1,38.76766000000001,-9.2264,218,1.9638
p0_1,38.76766000000001,-9.22639,219,1.9647
p0_1,38.76766000000001,-9.22638,220,1.9656
p0_1,38.76766000000001,-9.226370000000001,221,1.9665
p0_1,38.76767,-9.226370000000001,222,1.9676
p0_1,38.76767,-9.226360000000001,223,1.9685
p0_1,38.76767,-9.22635,224,1.9694
p0_1,38.767680000000006,-9.22635,225,1.9705
p0_1,38.767680000000006,-9.22634,226,1.9714
p0_1,38.76769,-9.22634,227,1.9725
p0_1,38.76769,-9.22633,228,1.9734
p0_1,38.767700000000005,-9.22633,229,1.9745
p0_1,38.767700000000005,-9.226320000000001,230,1.9754
p0_1,38.76771,-9.226320000000001,231,1.9765
p0_1,38.767720000000004,-9.226320000000001,232,1.9776
p0_1,38.76773,-9.226320000000001,233,1.9787
p0_1,38.76773,-9.226310000000002,234,1.9796
p0_1,38.76774,-9.226310000000002,235,1.9807
p0_1,38.76775000000001,-9.226310000000002,236,1.9818
p0_1,38.76776,-9.226310000000002,237,1.9829
p0_1,38.767770000000006,-9.226320000000001,238,1.9843
p0_1,38.76778,-9.226320000000001,239,1.9854
p0_1,38.767790000000005,-9.226320000000001,240,1.9865
p0_1,38.767790000000005,-9.22633,241,1.9874
p0_1,38.7678,-9.22633,242,1.9885
p0_1,38.7678,-9.22634,243,1.9894
p0_1,38.767810000000004,-9.22634,244,1.9905
p0_1,38.767810000000004,-9.22635,245,1.9914
p0_1,38.76782,-9.22635,246,1.9925
p0_1,38.767920000000004,-9.22633,247,2.0038
p0_1,38.76798,-9.22634,248,2.0105
p0_1,38.768420000000006,-9.226140000000001,249,2.0624
p0_1,38.76916000000001,-9.22579,250,2.1501
p0_1,38.769330000000004,-9.22572,251,2.17
p0_1,38.76944,-9.225670000000001,252,2.183
p0_1,38.769510000000004,-9.22564,253,2.1912
p0_1,38.76953,-9.22563,254,2.1936
p0_1,38.769560000000006,-9.22563,255,2.1969
p0_1,38.769580000000005,-9.22563,256,2.1991
p0_1,38.76961,-9.22563,257,2.2024
p0_1,38.769650000000006,-9.22565,258,2.2072
p0_1,38.770030000000006,-9.22587,259,2.2536
p0_1,38.77,-9.225980000000002,260,2.2637
p0_1,38.77,-9.22601,261,2.2663
p0_1,38.770010000000006,-9.2261,262,2.2742
p0_1,38.77002,-9.22616,263,2.2795
p0_1,38.770050000000005,-9.226220000000001,264,2.2857
p0_1,38.770160000000004,-9.22643,265,2.3076
p0_1,38.770210000000006,-9.22652,266,2.3172
p0_1,38.770390000000006,-9.226830000000001,267,2.3507
p0_1,38.770540000000004,-9.22709,268,2.3787
p0_1,38.77064,-9.22724,269,2.3958
p0_1,38.77076,-9.22737,270,2.4133
p0_1,38.770770000000006,-9.22737,271,2.4144
p0_1,38.770770000000006,-9.22738,272,2.4153
p0_1,38.77078,-9.22738,273,2.4164
p0_1,38.770790000000005,-9.22738,274,2.4175
p0_1,38.7708,-9.22738,275,2.4186
p0_1,38.7708,-9.227390000000002,276,2.4195
p0_1,38.770810000000004,-9.227390000000002,277,2.4206
p0_1,38.770810000000004,-9.227400000000001,278,2.4215
p0_1,38.77082,-9.227400000000001,279,2.4226
p0_1,38.77082,-9.22741,280,2.4235
p0_1,38.770830000000004,-9.22741,281,2.4246
p0_1,38.770830000000004,-9.22742,282,2.4255
p0_1,38.770830000000004,-9.22743,283,2.4264
p0_1,38.77084,-9.22743,284,2.4275
p0_1,38.77084,-9.227440000000001,285,2.4284
p0_1,38.77084,-9.227450000000001,286,2.4293
p0_1,38.77084,-9.22746,287,2.4302
p0_1,38.77084,-9.22747,288,2.4311
p0_1,38.77084,-9.22748,289,2.432
p0_1,38.77084,-9.227490000000001,290,2.4329
p0_1,38.77084,-9.227500000000001,291,2.4338
p0_1,38.77084,-9.22751,292,2.4347
p0_1,38.770830000000004,-9.22752,293,2.4361
p0_1,38.770830000000004,-9.227530000000002,294,2.437
p0_1,38.77082,-9.227540000000001,295,2.4384
p0_1,38.77082,-9.22755,296,2.4393
p0_1,38.770810000000004,-9.22755,297,2.4404
p0_1,38.770810000000004,-9.22756,298,2.4413
p0_1,38.7708,-9.22756,299,2.4424
p0_1,38.7708,-9.22757,300,2.4433
p0_1,38.770790000000005,-9.22757,301,2.4444
p0_1,38.77078,-9.22757,302,2.4455
p0_1,38.77078,-9.227580000000001,303,2.4464
p0_1,38.770770000000006,-9.227580000000001,304,2.4475
p0_1,38.77076,-9.227580000000001,305,2.4486
p0_1,38.77075000000001,-9.227580000000001,306,2.4497
p0_1,38.77074,-9.22757,307,2.4511
p0_1,38.770590000000006,-9.227640000000001,308,2.4688
p0_1,38.77056,-9.227670000000002,309,2.473
p0_1,38.77051,-9.22771,310,2.4796
p0_1,38.77017,-9.22804,311,2.527
p0_1,38.76993,-9.228290000000001,312,2.5614
p0_1,38.7699,-9.22832,313,2.5656
p0_1,38.7697,-9.22851,314,2.5933
p0_1,38.76959,-9.22864,315,2.6099
p0_1,38.769330000000004,-9.228890000000002,316,2.646
p0_1,38.7693,-9.22893,317,2.6508
p0_1,38.76924,-9.22898,318,2.6588
p0_1,38.769200000000005,-9.22902,319,2.6644
p0_1,38.76916000000001,-9.22906,320,2.67
p0_1,38.7691,-9.22912,321,2.6785
p0_1,38.7691,-9.229130000000001,322,2.6794
p0_1,38.76906,-9.229180000000001,323,2.6856
p0_1,38.76903,-9.22924,324,2.6918
p0_1,38.76899,-9.229320000000001,325,2.7
p0_1,38.76876,-9.22991,326,2.7572
p0_1,38.768750000000004,-9.22996,327,2.7617
p0_1,38.768750000000004,-9.22999,328,2.7643
p0_1,38.76874,-9.23001,329,2.7664
p0_1,38.76874,-9.23004,330,2.769
p0_1,38.76874,-9.23009,331,2.7733
p0_1,38.768730000000005,-9.23014,332,2.7778
p0_1,38.76872,-9.230210000000001,333,2.784
p0_1,38.768710000000006,-9.23024,334,2.7868
p0_1,38.768710000000006,-9.230250000000002,335,2.7877
p0_1,38.7687,-9.23027,336,2.7898
p0_1,38.76869000000001,-9.23029,337,2.7919
p0_1,38.76868,-9.23029,338,2.793
p0_1,38.76867,-9.230300000000002,339,2.7944
p0_1,38.768660000000004,-9.230310000000001,340,2.7958
p0_1,38.76867,-9.23032,341,2.7972
p0_1,38.76867,-9.23033,342,2.7981
p0_1,38.76868,-9.23033,343,2.7992
p0_1,38.7687,-9.23033,344,2.8014
p0_1,38.768710000000006,-9.23032,345,2.8028
p0_1,38.76872,-9.23032,346,2.8039
p0_1,38.768750000000004,-9.23032,347,2.8072
p0_1,38.76878000000001,-9.23032,348,2.8105
p0_1,38.76883,-9.230310000000001,349,2.8161
p0_1,38.7689,-9.23029,350,2.8241
p0_1,38.769070000000006,-9.230260000000001,351,2.8432
p0_1,38.7691,-9.230260000000001,352,2.8465
p0_1,38.76919,-9.23024,353,2.8567
p0_1,38.7693,-9.230220000000001,354,2.8691
p0_1,38.76939,-9.230210000000001,355,2.8791
p0_1,38.76946,-9.23019,356,2.8871
p0_1,38.769780000000004,-9.23014,357,2.9229
p0_1,38.769960000000005,-9.2301,358,2.9432
p0_1,38.770140000000005,-9.230070000000001,359,2.9634
p0_1,38.77019000000001,-9.230070000000001,360,2.969
p0_1,38.77024,-9.230070000000001,361,2.9746
p0_1,38.77028,-9.230070000000001,362,2.979
p0_1,38.770320000000005,-9.230070000000001,363,2.9834
p0_1,38.77035,-9.230070000000001,364,2.9867
p0_1,38.77037,-9.230070000000001,365,2.9889
p0_1,38.77044,-9.23009,366,2.9969
p0_1,38.77049,-9.2301,367,3.0025
p0_1,38.77053,-9.230110000000002,368,3.007
p0_1,38.770570000000006,-9.230120000000001,369,3.0115
p0_1,38.7706,-9.23013,370,3.0149
p0_1,38.77065,-9.23015,371,3.0207
p0_1,38.77071,-9.23018,372,3.0279
p0_1,38.77076,-9.230210000000001,373,3.034
p0_1,38.770830000000004,-9.230250000000002,374,3.0425
p0_1,38.770920000000004,-9.23032,375,3.0542
p0_1,38.771,-9.23038,376,3.0645
p0_1,38.771040000000006,-9.23042,377,3.0701
p0_1,38.77107,-9.230440000000002,378,3.0739
p0_1,38.771100000000004,-9.23046,379,3.0777
p0_1,38.77112,-9.23047,380,3.0801
p0_1,38.771150000000006,-9.23048,381,3.0835
p0_1,38.77118,-9.230490000000001,382,3.0869
p0_1,38.77123,-9.230490000000001,383,3.0925
p0_1,38.77129,-9.230500000000001,384,3.0992
p0_1,38.77131,-9.230490000000001,385,3.1016
p0_1,38.771330000000006,-9.23047,386,3.1044
p0_1,38.771350000000005,-9.230450000000001,387,3.1072
p0_1,38.77138,-9.230440000000002,388,3.1106
p0_1,38.77141,-9.23043,389,3.114
p0_1,38.77143,-9.23043,390,3.1162
p0_1,38.771460000000005,-9.23042,391,3.1196
p0_1,38.771480000000004,-9.23042,392,3.1218
p0_1,38.7715,-9.23042,393,3.124
p0_1,38.771510000000006,-9.23043,394,3.1254
p0_1,38.771530000000006,-9.23043,395,3.1276
p0_1,38.77154,-9.23043,396,3.1287
p0_1,38.77156,-9.230440000000002,397,3.1311
p0_1,38.77158,-9.230450000000001,398,3.1335
p0_1,38.77159,-9.230450000000001,399,3.1346
p0_1,38.771620000000006,-9.23047,400,3.1384
p0_1,38.771640000000005,-9.230490000000001,401,3.1412
p0_1,38.77167,-9.23051,402,3.145
p0_1,38.77169000000001,-9.23053,403,3.1478
p0_1,38.771710000000006,-9.23056,404,3.1512
p0_1,38.77172,-9.230590000000001,405,3.154
p0_1,38.77174,-9.23062,406,3.1574
p0_1,38.771750000000004,-9.23065,407,3.1602
p0_1,38.77176,-9.23067,408,3.1623
p0_1,38.77179,-9.230720000000002,409,3.1678
p0_1,38.771820000000005,-9.230770000000001,410,3.1733
p0_1,38.77185,-9.23081,411,3.1781
p0_1,38.77188,-9.23084,412,3.1823
p0_1,38.77192,-9.23088,413,3.1879
p0_1,38.77197,-9.230920000000001,414,3.1945
p0_1,38.772000000000006,-9.23094,415,3.1983
p0_1,38.772040000000004,-9.23095,416,3.2028
p0_1,38.77207000000001,-9.230970000000001,417,3.2066
p0_1,38.772110000000005,-9.23098,418,3.2111
p0_1,38.77214,-9.23098,419,3.2144
p0_1,38.772180000000006,-9.23098,420,3.2188
p0_1,38.77221,-9.23098,421,3.2221
p0_1,38.772240000000004,-9.23098,422,3.2254
p0_1,38.77228,-9.230970000000001,423,3.2299
p0_1,38.772310000000004,-9.230960000000001,424,3.2333
p0_1,38.772360000000006,-9.23094,425,3.2391
p0_1,38.772450000000006,-9.2309,426,3.2497
p0_1,38.77255,-9.23085,427,3.2616
p0_1,38.77266,-9.23079,428,3.2749
p0_1,38.772740000000006,-9.23076,429,3.2842
p0_1,38.77284,-9.230720000000002,430,3.2958
p0_1,38.77291,-9.2307,431,3.3038
p0_1,38.77297,-9.230690000000001,432,3.3105
p0_1,38.77304,-9.230680000000001,433,3.3183
p0_1,38.77309,-9.23067,434,3.3239
p0_1,38.773230000000005,-9.23066,435,3.3395
p0_1,38.77346,-9.230640000000001,436,3.3651
p0_1,38.77371,-9.23062,437,3.393
p0_1,38.77389,-9.23061,438,3.413
p0_1,38.77396,-9.2306,439,3.4208
p0_1,38.774010000000004,-9.230590000000001,440,3.4264
p0_1,38.774060000000006,-9.23057,441,3.4322
p0_1,38.774100000000004,-9.230550000000001,442,3.437
p0_1,38.774150000000006,-9.23052,443,3.4431
p0_1,38.77416,-9.230500000000001,444,3.4452
p0_1,38.774170000000005,-9.230490000000001,445,3.4466
p0_1,38.77418,-9.23048,446,3.448
p0_1,38.7742,-9.23047,447,3.4504
p0_1,38.774210000000004,-9.23047,448,3.4515
p0_1,38.77423,-9.23046,449,3.4539
p0_1,38.774240000000006,-9.23046,450,3.455
p0_1,38.77425,-9.23046,451,3.4561
p0_1,38.77427,-9.23046,452,3.4583
p0_1,38.774280000000005,-9.23047,453,3.4597
p0_1,38.774300000000004,-9.23047,454,3.4619
p0_1,38.77431,-9.23048,455,3.4633
p0_1,38.77432,-9.230490000000001,456,3.4647
p0_1,38.774330000000006,-9.230500000000001,457,3.4661
p0_1,38.774350000000005,-9.23052,458,3.4689
p0_1,38.7744,-9.23053,459,3.4745
p0_1,38.77447,-9.230540000000001,460,3.4823
p0_1,38.77447505776965,-9.230522330557642,461,3.4839
p0_1,38.77519,-9.230440000000002,462,3.5637
p0_1,38.77676164872649,-9.229838855378869,463,3.7461
p0_1,38.77787,-9.22958,464,3.8714
p0_1,38.77814353738178,-9.22911923880404,465,3.9216
p0_1,38.77823816925753,-9.229070435484793,466,3.9329
p0_1,38.778333793811264,-9.229064767700851,467,3.9435
p0_1,38.77842698227275,-9.229107232604605,468,3.9545
p0_1,38.778498915906795,-9.229210861578528,469,3.9665
p0_1,38.77851196389017,-9.229301843463013,470,3.9745
p0_1,38.778511114528335,-9.2294119802041,471,3.984
p0_1,38.778457190855406,-9.22950280670604,472,3.9939
p0_1,38.7783838322991,-9.229591355499018,473,4.0051
p0_1,38.77827613343479,-9.229605756294255,474,4.0171
p0_1,38.77812205746815,-9.22955633508491,475,4.0348
p0_1,38.77794219523831,-9.229571023520577,476,4.0548
p0_1,38.776799871239746,-9.22995139983792,477,4.186
p0_1,38.77624408219191,-9.230160355556489,478,4.2504
p0_1,38.77617884770747,-9.23045252878624,479,4.2767
p0_1,38.775980000000004,-9.23095,480,4.3252
p0_1,38.775870000000005,-9.23121,481,4.3508
p0_1,38.77584,-9.231290000000001,482,4.3585
p0_1,38.775710000000004,-9.23168,483,4.3953
p0_1,38.77554000000001,-9.2321,484,4.4363
p0_1,38.77553,-9.232140000000001,485,4.4399
p0_1,38.775420000000004,-9.23243,486,4.4679
p0_1,38.775400000000005,-9.232460000000001,487,4.4713
p0_1,38.77534,-9.23264,488,4.4883
p0_1,38.775270000000006,-9.23283,489,4.5065
p0_1,38.77512,-9.23318,490,4.5411
p0_1,38.775000000000006,-9.23344,491,4.5673
p0_1,38.774890000000006,-9.2337,492,4.5929
p0_1,38.775670000000005,-9.23431,493,4.6945
p0_1,38.77562,-9.234390000000001,494,4.7034
p0_1,38.775580000000005,-9.23445,495,4.7102
p0_1,38.77552,-9.23455,496,4.7211
p0_1,38.77544,-9.234670000000001,497,4.7348
p0_1,38.775330000000004,-9.234860000000001,498,4.7553
p0_1,38.775270000000006,-9.234950000000001,499,4.7656
p0_1,38.775180000000006,-9.235090000000001,500,4.7813
p0_1,38.77508,-9.23525,501,4.7991
p0_1,38.77497,-9.235420000000001,502,4.8183
p0_1,38.77494,-9.235460000000002,503,4.8231
p0_1,38.77488,-9.235560000000001,504,4.834
p0_1,38.774770000000004,-9.235740000000002,505,4.8538
p0_1,38.77474,-9.235790000000001,506,4.8593
p0_1,38.774640000000005,-9.23595,507,4.8771
p0_1,38.77459,-9.23602,508,4.8853
p0_1,38.77454,-9.23611,509,4.8949
p0_1,38.774440000000006,-9.236270000000001,510,4.9127
p0_1,38.77429,-9.23652,511,4.94
p0_1,38.774240000000006,-9.236590000000001,512,4.9482
p0_1,38.774190000000004,-9.23667,513,4.9571
p0_1,38.77414,-9.23675,514,4.966
p0_1,38.77393,-9.237070000000001,515,5.0023
p0_1,38.77387,-9.237160000000001,516,5.0126
p0_1,38.77393,-9.23723,517,5.0216
p0_1,38.774210000000004,-9.2375,518,5.0606
p0_1,38.774480000000004,-9.237760000000002,519,5.0981
p0_1,38.774530000000006,-9.237810000000001,520,5.1051
p0_1,38.775310000000005,-9.2386,521,5.2156
p0_1,38.775360000000006,-9.238660000000001,522,5.2232
p0_1,38.775380000000006,-9.23867,523,5.2256
p0_1,38.775490000000005,-9.23878,524,5.2411
p0_1,38.775650000000006,-9.238930000000002,525,5.2631
p0_1,38.77581,-9.239090000000001,526,5.2857
p0_1,38.775920000000006,-9.23919,527,5.3007
p0_1,38.776050000000005,-9.239320000000001,528,5.319
p0_1,38.77608,-9.23935,529,5.3232
p0_1,38.77615,-9.239410000000001,530,5.3326
p0_1,38.77631,-9.23956,531,5.3546
p0_1,38.77635,-9.239600000000001,532,5.3602
p0_1,38.77638,-9.23963,533,5.3644
p0_1,38.776390000000006,-9.23963,534,5.3655
p0_1,38.776410000000006,-9.239640000000001,535,5.3679
p0_1,38.77642,-9.239650000000001,536,5.3693
p0_1,38.77644,-9.23966,537,5.3717
p0_1,38.776500000000006,-9.239690000000001,538,5.3789
p0_1,38.77647,-9.23975,539,5.3851
p0_1,38.776450000000004,-9.23982,540,5.3916
p0_1,38.77664,-9.239970000000001,541,5.4164
p0_1,38.776770000000006,-9.24008,542,5.4337
p0_1,38.7768,-9.2401,543,5.4375
p0_1,38.776920000000004,-9.240200000000002,544,5.4534
p0_1,38.777,-9.240260000000001,545,5.4637
p0_1,38.77718,-9.240400000000001,546,5.4871
p0_1,38.777120000000004,-9.24055,547,5.5017
p0_1,38.77709,-9.24061,548,5.5079
p0_1,38.777060000000006,-9.24069,549,5.5156
p0_1,38.77694,-9.24098,550,5.5441
p0_1,38.77682,-9.24126,551,5.5718
p0_1,38.776790000000005,-9.24135,552,5.5803
p0_1,38.77647,-9.24212,553,5.6559
p0_1,38.776630000000004,-9.24224,554,5.6765
p0_1,38.776790000000005,-9.242360000000001,555,5.6971
p0_1,38.776880000000006,-9.24244,556,5.7093
p0_1,38.776970000000006,-9.242510000000001,557,5.721
p0_1,38.777150000000006,-9.242650000000001,558,5.7444
p0_1,38.777240000000006,-9.24273,559,5.7566
p0_1,38.777300000000004,-9.242780000000002,560,5.7646
p0_1,38.77745,-9.2429,561,5.7843
p0_1,38.77758,-9.24301,562,5.8016
p0_1,38.777640000000005,-9.243060000000002,563,5.8096
p0_1,38.77783,-9.24323,564,5.8354
p0_1,38.77792,-9.24329,565,5.8467
p0_1,38.77799,-9.243350000000001,566,5.8561
p0_1,38.77803,-9.24327,567,5.8643
p0_1,38.778150000000004,-9.24304,568,5.8883
p0_1,38.77826,-9.242830000000001,569,5.9102
p0_1,38.778310000000005,-9.24271,570,5.922
p0_1,38.77837,-9.242600000000001,571,5.9336
p0_1,38.77843,-9.24247,572,5.9467
p0_1,38.77846,-9.242420000000001,573,5.9522
p0_1,38.77857,-9.2422,574,5.9749
p0_1,38.77868,-9.24197,575,5.9983
p0_1,38.778760000000005,-9.24182,576,6.0141
p0_1,38.778800000000004,-9.24173,577,6.0231
p0_1,38.778850000000006,-9.241620000000001,578,6.0341
p0_1,38.779,-9.241330000000001,579,6.0643
p0_1,38.77924,-9.240860000000001,580,6.113
p0_1,38.7794,-9.240540000000001,581,6.146
p0_1,38.779680000000006,-9.23999,582,6.2029
p0_1,38.78005,-9.23925,583,6.2791
p0_1,38.780330000000006,-9.23869,584,6.3368
p0_1,38.7804,-9.23855,585,6.3512
p0_1,38.7806,-9.23816,586,6.3917
p0_1,38.781263234496635,-9.236912981012706,587,6.5226
p0_1,38.78177072894711,-9.237052563022916,588,6.5803
p0_1,38.78201,-9.23657,589,6.6299
p0_1,38.78213033244519,-9.236176297457108,590,6.6666
p0_1,38.782436607140916,-9.235335701627484,591,6.747
p0_1,38.783640000000005,-9.23403,592,6.9223
p0_1,38.784224958843645,-9.233282845319922,593,7.0141
p0_1,38.7842175690305,-9.232740798796215,594,7.0611
p0_1,38.78420111160984,-9.23226243908741,595,7.1026
p0_1,38.78419262425184,-9.231920128868081,596,7.1323
p0_1,38.7840685790249,-9.231736659384115,597,7.1534
p0_1,38.783993502404634,-9.231725121226686,598,7.1618
p0_1,38.78394523278981,-9.231734952198403,599,7.1672
p0_1,38.78383,-9.231860000000001,600,7.184
p0_1,38.78132,-9.234570000000001,601,7.5488
p0_1,38.78126,-9.234530000000001,602,7.5563
p0_1,38.78119,-9.234490000000001,603,7.5648
p0_1,38.78092,-9.23431,604,7.5986
p0_1,38.78079,-9.23423,605,7.6146
p0_1,38.78016,-9.23385,606,7.692
p0_1,38.77975,-9.233600000000001,607,7.7425
p0_1,38.77973,-9.23366,608,7.7482
p0_1,38.77971,-9.23371,609,7.7531
p0_1,38.7796,-9.23399,610,7.7803
p0_1,38.77951,-9.23422,611,7.8026
p0_1,38.77942,-9.234160000000001,612,7.8139
p0_1,38.779410000000006,-9.234160000000001,613,7.815
p0_1,38.779090000000004,-9.233960000000002,614,7.8546
p0_1,38.77902,-9.233920000000001,615,7.8631
p0_1,38.77892000000001,-9.23385,616,7.8758
p0_1,38.77872,-9.233730000000001,617,7.9004
p0_1,38.77868,-9.2337,618,7.9056
p0_1,38.77863,-9.23367,619,7.9117
p0_1,38.77855,-9.233630000000002,620,7.9212
p0_1,38.77866,-9.23333,621,7.9499
p0_1,38.778690000000005,-9.23324,622,7.9584
p0_1,38.7787,-9.233220000000001,623,7.9605
p0_1,38.77872,-9.23315,624,7.967
p0_1,38.77875,-9.233030000000001,625,7.9779
p0_1,38.778780000000005,-9.2329,626,7.9897
p0_1,38.778800000000004,-9.23278,627,8.0003
p0_1,38.77881,-9.23271,628,8.0065
p0_1,38.77882,-9.23264,629,8.0127
p0_1,38.77882,-9.23257,630,8.0188
p0_1,38.778830000000006,-9.23244,631,8.0301
p0_1,38.778830000000006,-9.23236,632,8.037
p0_1,38.778830000000006,-9.232270000000002,633,8.0448
p0_1,38.778830000000006,-9.232180000000001,634,8.0526
p0_1,38.778800000000004,-9.231910000000001,635,8.0762
p0_1,38.77879,-9.23173,636,8.0918
p0_1,38.77877,-9.23159,637,8.1041
p0_1,38.778760000000005,-9.231520000000002,638,8.1103
p0_1,38.77875,-9.231480000000001,639,8.1139
p0_1,38.77873,-9.23142,640,8.1196
p0_1,38.778710000000004,-9.231330000000002,641,8.1277
p0_1,38.778620000000004,-9.23103,642,8.1556
p0_1,38.77857,-9.23084,643,8.173
p0_1,38.77854000000001,-9.2307,644,8.1856
p0_1,38.7785,-9.230450000000001,645,8.2077`;

export default function ImportShapeFromText({ onImport }) {
  //

  const [importError, setImportError] = useState();
  const [shapeText, setShapeText] = useState('');

  const handleShapeImport = async () => {
    try {
      const parsedShapes = await parseShapesCsv(shapeText); // Use the helper function to transform the CSV text into an array of JSON objects
      console.log(parsedShapes);
      onImport(parsedShapes[0].points); // Pass only the first result to the caller
    } catch (err) {
      setImportError(err.message);
    }
  };

  const handleShapeDelete = () => {
    setImportError('');
    setShapeText('');
  };

  return (
    <>
      <SimpleGrid cols={1}>
        {shapeText.length > 0 && (
          <Alert icon={<TbInfoCircleFilled size='20px' />} title='Atenção' color='blue'>
            A importação de novos pontos substitui os atualmente guardados na shape. Utilize esta função para atualizar a shape sem ser necessário re-associar shapes aos patterns.
          </Alert>
        )}
        <Textarea label='Importar Shape' value={shapeText} autosize minRows={3} maxRows={10} onChange={({ target }) => setShapeText(target.value)} error={importError} />
      </SimpleGrid>
      <SimpleGrid cols={2}>
        <Button onClick={handleShapeImport} disabled={!shapeText.length}>
          Iniciar Importação
        </Button>
        <Button variant='light' color='gray' onClick={handleShapeDelete} disabled={!shapeText.length}>
          Limpar
        </Button>
      </SimpleGrid>
    </>
  );
}
